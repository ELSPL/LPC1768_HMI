   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"lpc17xx_systick.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.comm	delay_timer,4,4
  19              		.comm	led_timer,4,4
  20              		.align	2
  21              		.global	SysTick_Handler
  22              		.thumb
  23              		.thumb_func
  25              	SysTick_Handler:
  26              	.LFB55:
  27              		.file 1 "../Source Files/lpc17xx_systick.c"
   1:../Source Files/lpc17xx_systick.c **** /**********************************************************************
   2:../Source Files/lpc17xx_systick.c **** * $Id$		lpc17xx_systick.c
   3:../Source Files/lpc17xx_systick.c **** *//**
   4:../Source Files/lpc17xx_systick.c **** * @file		lpc17xx_systick.c
   5:../Source Files/lpc17xx_systick.c **** * @brief	Contains all functions support for SYSTICK firmware library
   6:../Source Files/lpc17xx_systick.c **** * 			on LPC17xx
   7:../Source Files/lpc17xx_systick.c **** * @version	1.0
   8:../Source Files/lpc17xx_systick.c **** * @date		24. July. 2013
   9:../Source Files/lpc17xx_systick.c **** * @author	Dwijay.Edutech Learning Solutions
  10:../Source Files/lpc17xx_systick.c **** ***********************************************************************
  11:../Source Files/lpc17xx_systick.c **** * Software that is described herein is for illustrative purposes only
  12:../Source Files/lpc17xx_systick.c **** * which provides customers with programming information regarding the
  13:../Source Files/lpc17xx_systick.c **** * products. This software is supplied "AS IS" without any warranties.
  14:../Source Files/lpc17xx_systick.c **** * NXP Semiconductors assumes no responsibility or liability for the
  15:../Source Files/lpc17xx_systick.c **** * use of the software, conveys no license or title under any patent,
  16:../Source Files/lpc17xx_systick.c **** * copyright, or mask work right to the product. NXP Semiconductors
  17:../Source Files/lpc17xx_systick.c **** * reserves the right to make changes in the software without
  18:../Source Files/lpc17xx_systick.c **** * notification. NXP Semiconductors also make no representation or
  19:../Source Files/lpc17xx_systick.c **** * warranty that such application will be suitable for the specified
  20:../Source Files/lpc17xx_systick.c **** * use without further testing or modification.
  21:../Source Files/lpc17xx_systick.c **** **********************************************************************/
  22:../Source Files/lpc17xx_systick.c **** 
  23:../Source Files/lpc17xx_systick.c **** /* Peripheral group ----------------------------------------------------------- */
  24:../Source Files/lpc17xx_systick.c **** /** @addtogroup SYSTICK
  25:../Source Files/lpc17xx_systick.c ****  * @{
  26:../Source Files/lpc17xx_systick.c ****  */
  27:../Source Files/lpc17xx_systick.c **** 
  28:../Source Files/lpc17xx_systick.c **** /* Includes ------------------------------------------------------------------- */
  29:../Source Files/lpc17xx_systick.c **** #include "lpc_system_init.h"
  30:../Source Files/lpc17xx_systick.c **** 
  31:../Source Files/lpc17xx_systick.c **** /*
  32:../Source Files/lpc17xx_systick.c ****  * Variables
  33:../Source Files/lpc17xx_systick.c ****  */
  34:../Source Files/lpc17xx_systick.c **** uint32_t delay_timer;
  35:../Source Files/lpc17xx_systick.c **** uint32_t led_timer;
  36:../Source Files/lpc17xx_systick.c **** 
  37:../Source Files/lpc17xx_systick.c **** /*----------------- INTERRUPT SERVICE ROUTINES --------------------------*/
  38:../Source Files/lpc17xx_systick.c **** /*********************************************************************//**
  39:../Source Files/lpc17xx_systick.c ****  * @brief 		SysTick interrupt handler
  40:../Source Files/lpc17xx_systick.c ****  * @param		None
  41:../Source Files/lpc17xx_systick.c ****  * @return 		None
  42:../Source Files/lpc17xx_systick.c ****  ***********************************************************************/
  43:../Source Files/lpc17xx_systick.c **** void SysTick_Handler(void)
  44:../Source Files/lpc17xx_systick.c **** {
  28              		.loc 1 44 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32 0000 80B5     		push	{r7, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 7, -8
  36              		.cfi_offset 14, -4
  37 0002 82B0     		sub	sp, sp, #8
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
  40 0004 00AF     		add	r7, sp, #0
  41              	.LCFI2:
  42              		.cfi_def_cfa_register 7
  45:../Source Files/lpc17xx_systick.c **** 	uchar flag;
  46:../Source Files/lpc17xx_systick.c **** 
  47:../Source Files/lpc17xx_systick.c ****     if(led_timer)
  43              		.loc 1 47 0
  44 0006 40F20003 		movw	r3, #:lower16:led_timer
  45 000a C0F20003 		movt	r3, #:upper16:led_timer
  46 000e 1B68     		ldr	r3, [r3, #0]
  47 0010 002B     		cmp	r3, #0
  48 0012 0CD0     		beq	.L2
  48:../Source Files/lpc17xx_systick.c ****     {
  49:../Source Files/lpc17xx_systick.c ****     	--led_timer;
  49              		.loc 1 49 0
  50 0014 40F20003 		movw	r3, #:lower16:led_timer
  51 0018 C0F20003 		movt	r3, #:upper16:led_timer
  52 001c 1B68     		ldr	r3, [r3, #0]
  53 001e 03F1FF32 		add	r2, r3, #-1
  54 0022 40F20003 		movw	r3, #:lower16:led_timer
  55 0026 C0F20003 		movt	r3, #:upper16:led_timer
  56 002a 1A60     		str	r2, [r3, #0]
  57 002c 1FE0     		b	.L3
  58              	.L2:
  50:../Source Files/lpc17xx_systick.c ****     }
  51:../Source Files/lpc17xx_systick.c ****     else
  52:../Source Files/lpc17xx_systick.c ****     {
  53:../Source Files/lpc17xx_systick.c ****     	if(flag)
  59              		.loc 1 53 0
  60 002e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
  61 0030 002B     		cmp	r3, #0
  62 0032 09D0     		beq	.L4
  54:../Source Files/lpc17xx_systick.c ****     	{
  55:../Source Files/lpc17xx_systick.c ****     		GPIO_SetValue(3,_BIT(25));
  63              		.loc 1 55 0
  64 0034 4FF00300 		mov	r0, #3
  65 0038 4FF00071 		mov	r1, #33554432
  66 003c FFF7FEFF 		bl	GPIO_SetValue
  56:../Source Files/lpc17xx_systick.c ****     		flag = 0;
  67              		.loc 1 56 0
  68 0040 4FF00003 		mov	r3, #0
  69 0044 FB71     		strb	r3, [r7, #7]
  70 0046 08E0     		b	.L5
  71              	.L4:
  57:../Source Files/lpc17xx_systick.c ****     	}
  58:../Source Files/lpc17xx_systick.c ****     	else
  59:../Source Files/lpc17xx_systick.c ****     	{
  60:../Source Files/lpc17xx_systick.c ****     		GPIO_ClearValue(3,_BIT(25));
  72              		.loc 1 60 0
  73 0048 4FF00300 		mov	r0, #3
  74 004c 4FF00071 		mov	r1, #33554432
  75 0050 FFF7FEFF 		bl	GPIO_ClearValue
  61:../Source Files/lpc17xx_systick.c ****     		flag = 1;
  76              		.loc 1 61 0
  77 0054 4FF00103 		mov	r3, #1
  78 0058 FB71     		strb	r3, [r7, #7]
  79              	.L5:
  62:../Source Files/lpc17xx_systick.c ****     	}
  63:../Source Files/lpc17xx_systick.c ****     	led_timer=led_delay;
  80              		.loc 1 63 0
  81 005a 40F20003 		movw	r3, #:lower16:led_delay
  82 005e C0F20003 		movt	r3, #:upper16:led_delay
  83 0062 1A68     		ldr	r2, [r3, #0]
  84 0064 40F20003 		movw	r3, #:lower16:led_timer
  85 0068 C0F20003 		movt	r3, #:upper16:led_timer
  86 006c 1A60     		str	r2, [r3, #0]
  87              	.L3:
  64:../Source Files/lpc17xx_systick.c ****     }
  65:../Source Files/lpc17xx_systick.c **** 
  66:../Source Files/lpc17xx_systick.c **** 	if(delay_timer)
  88              		.loc 1 66 0
  89 006e 40F20003 		movw	r3, #:lower16:delay_timer
  90 0072 C0F20003 		movt	r3, #:upper16:delay_timer
  91 0076 1B68     		ldr	r3, [r3, #0]
  92 0078 002B     		cmp	r3, #0
  93 007a 0BD0     		beq	.L6
  67:../Source Files/lpc17xx_systick.c ****     {
  68:../Source Files/lpc17xx_systick.c ****       --delay_timer;           /*decrement Delay Timer */
  94              		.loc 1 68 0
  95 007c 40F20003 		movw	r3, #:lower16:delay_timer
  96 0080 C0F20003 		movt	r3, #:upper16:delay_timer
  97 0084 1B68     		ldr	r3, [r3, #0]
  98 0086 03F1FF32 		add	r2, r3, #-1
  99 008a 40F20003 		movw	r3, #:lower16:delay_timer
 100 008e C0F20003 		movt	r3, #:upper16:delay_timer
 101 0092 1A60     		str	r2, [r3, #0]
 102              	.L6:
  69:../Source Files/lpc17xx_systick.c ****     }
  70:../Source Files/lpc17xx_systick.c **** 	
  71:../Source Files/lpc17xx_systick.c **** 	//Clear System Tick counter flag
  72:../Source Files/lpc17xx_systick.c **** 	SYSTICK_ClearCounterFlag();
 103              		.loc 1 72 0
 104 0094 FFF7FEFF 		bl	SYSTICK_ClearCounterFlag
  73:../Source Files/lpc17xx_systick.c **** }
 105              		.loc 1 73 0
 106 0098 07F10807 		add	r7, r7, #8
 107 009c BD46     		mov	sp, r7
 108 009e 80BD     		pop	{r7, pc}
 109              		.cfi_endproc
 110              	.LFE55:
 112              		.align	2
 113              		.global	delay_ms
 114              		.thumb
 115              		.thumb_func
 117              	delay_ms:
 118              	.LFB56:
  74:../Source Files/lpc17xx_systick.c **** 
  75:../Source Files/lpc17xx_systick.c **** /* Public Functions ----------------------------------------------------------- */
  76:../Source Files/lpc17xx_systick.c **** /** @addtogroup SYSTICK_Public_Functions
  77:../Source Files/lpc17xx_systick.c ****  * @{
  78:../Source Files/lpc17xx_systick.c ****  */
  79:../Source Files/lpc17xx_systick.c **** /*********************************************************************//**
  80:../Source Files/lpc17xx_systick.c ****  * @brief 		Delay Function
  81:../Source Files/lpc17xx_systick.c ****  * @param		value in ms
  82:../Source Files/lpc17xx_systick.c ****  * @return 		None
  83:../Source Files/lpc17xx_systick.c ****  ***********************************************************************/
  84:../Source Files/lpc17xx_systick.c **** void delay_ms (uint32_t dly_ticks) 
  85:../Source Files/lpc17xx_systick.c **** {
 119              		.loc 1 85 0
 120              		.cfi_startproc
 121              		@ args = 0, pretend = 0, frame = 8
 122              		@ frame_needed = 1, uses_anonymous_args = 0
 123              		@ link register save eliminated.
 124 00a0 80B4     		push	{r7}
 125              	.LCFI3:
 126              		.cfi_def_cfa_offset 4
 127              		.cfi_offset 7, -4
 128 00a2 83B0     		sub	sp, sp, #12
 129              	.LCFI4:
 130              		.cfi_def_cfa_offset 16
 131 00a4 00AF     		add	r7, sp, #0
 132              	.LCFI5:
 133              		.cfi_def_cfa_register 7
 134 00a6 7860     		str	r0, [r7, #4]
  86:../Source Files/lpc17xx_systick.c ****   delay_timer = dly_ticks;
 135              		.loc 1 86 0
 136 00a8 40F20003 		movw	r3, #:lower16:delay_timer
 137 00ac C0F20003 		movt	r3, #:upper16:delay_timer
 138 00b0 7A68     		ldr	r2, [r7, #4]
 139 00b2 1A60     		str	r2, [r3, #0]
  87:../Source Files/lpc17xx_systick.c ****   while(delay_timer)
 140              		.loc 1 87 0
 141 00b4 00BF     		nop
 142              	.L8:
 143              		.loc 1 87 0 is_stmt 0 discriminator 1
 144 00b6 40F20003 		movw	r3, #:lower16:delay_timer
 145 00ba C0F20003 		movt	r3, #:upper16:delay_timer
 146 00be 1B68     		ldr	r3, [r3, #0]
 147 00c0 002B     		cmp	r3, #0
 148 00c2 F8D1     		bne	.L8
  88:../Source Files/lpc17xx_systick.c ****   {
  89:../Source Files/lpc17xx_systick.c ****     /* do nothing */
  90:../Source Files/lpc17xx_systick.c ****   } 
  91:../Source Files/lpc17xx_systick.c **** }
 149              		.loc 1 91 0 is_stmt 1
 150 00c4 07F10C07 		add	r7, r7, #12
 151 00c8 BD46     		mov	sp, r7
 152 00ca 80BC     		pop	{r7}
 153 00cc 7047     		bx	lr
 154              		.cfi_endproc
 155              	.LFE56:
 157 00ce 00BF     		.align	2
 158              		.global	SYSTICK_Config
 159              		.thumb
 160              		.thumb_func
 162              	SYSTICK_Config:
 163              	.LFB57:
  92:../Source Files/lpc17xx_systick.c **** 
  93:../Source Files/lpc17xx_systick.c ****  /*********************************************************************//**
  94:../Source Files/lpc17xx_systick.c ****  * @brief 		Initial System Tick with Config
  95:../Source Files/lpc17xx_systick.c ****  * @param[in]	None
  96:../Source Files/lpc17xx_systick.c ****  * @return 		None
  97:../Source Files/lpc17xx_systick.c ****  **********************************************************************/
  98:../Source Files/lpc17xx_systick.c **** void SYSTICK_Config(void)
  99:../Source Files/lpc17xx_systick.c **** {
 164              		.loc 1 99 0
 165              		.cfi_startproc
 166              		@ args = 0, pretend = 0, frame = 0
 167              		@ frame_needed = 1, uses_anonymous_args = 0
 168 00d0 80B5     		push	{r7, lr}
 169              	.LCFI6:
 170              		.cfi_def_cfa_offset 8
 171              		.cfi_offset 7, -8
 172              		.cfi_offset 14, -4
 173 00d2 00AF     		add	r7, sp, #0
 174              	.LCFI7:
 175              		.cfi_def_cfa_register 7
 100:../Source Files/lpc17xx_systick.c ****   //Initialize System Tick with 10ms time interval
 101:../Source Files/lpc17xx_systick.c ****   SYSTICK_InternalInit(1);
 176              		.loc 1 101 0
 177 00d4 4FF00100 		mov	r0, #1
 178 00d8 FFF7FEFF 		bl	SYSTICK_InternalInit
 102:../Source Files/lpc17xx_systick.c ****   //Enable System Tick interrupt
 103:../Source Files/lpc17xx_systick.c ****   SYSTICK_IntCmd(ENABLE);
 179              		.loc 1 103 0
 180 00dc 4FF00100 		mov	r0, #1
 181 00e0 FFF7FEFF 		bl	SYSTICK_IntCmd
 104:../Source Files/lpc17xx_systick.c ****   //Enable System Tick Counter
 105:../Source Files/lpc17xx_systick.c ****   SYSTICK_Cmd(ENABLE);
 182              		.loc 1 105 0
 183 00e4 4FF00100 		mov	r0, #1
 184 00e8 FFF7FEFF 		bl	SYSTICK_Cmd
 106:../Source Files/lpc17xx_systick.c **** }
 185              		.loc 1 106 0
 186 00ec 80BD     		pop	{r7, pc}
 187              		.cfi_endproc
 188              	.LFE57:
 190              		.global	__aeabi_ui2f
 191              		.global	__aeabi_fcmpgt
 192 00ee 00BF     		.align	2
 193              		.global	SYSTICK_InternalInit
 194              		.thumb
 195              		.thumb_func
 197              	SYSTICK_InternalInit:
 198              	.LFB58:
 107:../Source Files/lpc17xx_systick.c **** 
 108:../Source Files/lpc17xx_systick.c **** /*********************************************************************//**
 109:../Source Files/lpc17xx_systick.c ****  * @brief 		Initial System Tick with using internal CPU clock source
 110:../Source Files/lpc17xx_systick.c ****  * @param[in]	time	time interval(ms)
 111:../Source Files/lpc17xx_systick.c ****  * @return 		None
 112:../Source Files/lpc17xx_systick.c ****  **********************************************************************/
 113:../Source Files/lpc17xx_systick.c **** void SYSTICK_InternalInit(uint32_t time)
 114:../Source Files/lpc17xx_systick.c **** {
 199              		.loc 1 114 0
 200              		.cfi_startproc
 201              		@ args = 0, pretend = 0, frame = 16
 202              		@ frame_needed = 1, uses_anonymous_args = 0
 203 00f0 80B5     		push	{r7, lr}
 204              	.LCFI8:
 205              		.cfi_def_cfa_offset 8
 206              		.cfi_offset 7, -8
 207              		.cfi_offset 14, -4
 208 00f2 84B0     		sub	sp, sp, #16
 209              	.LCFI9:
 210              		.cfi_def_cfa_offset 24
 211 00f4 00AF     		add	r7, sp, #0
 212              	.LCFI10:
 213              		.cfi_def_cfa_register 7
 214 00f6 7860     		str	r0, [r7, #4]
 115:../Source Files/lpc17xx_systick.c **** 	uint32_t cclk;
 116:../Source Files/lpc17xx_systick.c **** 	float maxtime;
 117:../Source Files/lpc17xx_systick.c **** 
 118:../Source Files/lpc17xx_systick.c **** 	cclk = SystemCoreClock;
 215              		.loc 1 118 0
 216 00f8 40F20003 		movw	r3, #:lower16:SystemCoreClock
 217 00fc C0F20003 		movt	r3, #:upper16:SystemCoreClock
 218 0100 1B68     		ldr	r3, [r3, #0]
 219 0102 FB60     		str	r3, [r7, #12]
 119:../Source Files/lpc17xx_systick.c **** 	/* With internal CPU clock frequency for LPC17xx is 'SystemCoreClock'
 120:../Source Files/lpc17xx_systick.c **** 	 * And limit 24 bit for RELOAD value
 121:../Source Files/lpc17xx_systick.c **** 	 * So the maximum time can be set:
 122:../Source Files/lpc17xx_systick.c **** 	 * 1/SystemCoreClock * (2^24) * 1000 (ms)
 123:../Source Files/lpc17xx_systick.c **** 	 */
 124:../Source Files/lpc17xx_systick.c **** 	//check time value is available or not
 125:../Source Files/lpc17xx_systick.c **** 	maxtime = (1<<24)/(SystemCoreClock / 1000) ;
 220              		.loc 1 125 0
 221 0104 40F20003 		movw	r3, #:lower16:SystemCoreClock
 222 0108 C0F20003 		movt	r3, #:upper16:SystemCoreClock
 223 010c 1A68     		ldr	r2, [r3, #0]
 224 010e 44F6D353 		movw	r3, #19923
 225 0112 C1F26203 		movt	r3, 4194
 226 0116 A3FB0203 		umull	r0, r3, r3, r2
 227 011a 4FEA9313 		lsr	r3, r3, #6
 228 011e 4FF08072 		mov	r2, #16777216
 229 0122 B2FBF3F3 		udiv	r3, r2, r3
 230 0126 1846     		mov	r0, r3
 231 0128 FFF7FEFF 		bl	__aeabi_ui2f
 232 012c 0346     		mov	r3, r0
 233 012e BB60     		str	r3, [r7, #8]	@ float
 126:../Source Files/lpc17xx_systick.c **** 	if(time > maxtime)
 234              		.loc 1 126 0
 235 0130 7868     		ldr	r0, [r7, #4]
 236 0132 FFF7FEFF 		bl	__aeabi_ui2f
 237 0136 0346     		mov	r3, r0
 238 0138 1846     		mov	r0, r3
 239 013a B968     		ldr	r1, [r7, #8]	@ float
 240 013c FFF7FEFF 		bl	__aeabi_fcmpgt
 241 0140 0346     		mov	r3, r0
 242 0142 002B     		cmp	r3, #0
 243 0144 00D0     		beq	.L14
 244              	.L12:
 245              	.L13:
 127:../Source Files/lpc17xx_systick.c **** 		//Error loop
 128:../Source Files/lpc17xx_systick.c **** 		while(1);
 246              		.loc 1 128 0 discriminator 1
 247 0146 FEE7     		b	.L13
 248              	.L14:
 129:../Source Files/lpc17xx_systick.c **** 	else
 130:../Source Files/lpc17xx_systick.c **** 	{
 131:../Source Files/lpc17xx_systick.c **** 		//Select CPU clock is System Tick clock source
 132:../Source Files/lpc17xx_systick.c **** 		SysTick->CTRL |= ST_CTRL_CLKSOURCE;
 249              		.loc 1 132 0
 250 0148 4EF21003 		movw	r3, #57360
 251 014c CEF20003 		movt	r3, 57344
 252 0150 4EF21002 		movw	r2, #57360
 253 0154 CEF20002 		movt	r2, 57344
 254 0158 1268     		ldr	r2, [r2, #0]
 255 015a 42F00402 		orr	r2, r2, #4
 256 015e 1A60     		str	r2, [r3, #0]
 133:../Source Files/lpc17xx_systick.c **** 		/* Set RELOAD value
 134:../Source Files/lpc17xx_systick.c **** 		 * RELOAD = (SystemCoreClock/1000) * time - 1
 135:../Source Files/lpc17xx_systick.c **** 		 * with time base is millisecond
 136:../Source Files/lpc17xx_systick.c **** 		 */
 137:../Source Files/lpc17xx_systick.c **** 		SysTick->LOAD = (cclk/1000)*time - 1;
 257              		.loc 1 137 0
 258 0160 4EF21003 		movw	r3, #57360
 259 0164 CEF20003 		movt	r3, 57344
 260 0168 F968     		ldr	r1, [r7, #12]
 261 016a 44F6D352 		movw	r2, #19923
 262 016e C1F26202 		movt	r2, 4194
 263 0172 A2FB0102 		umull	r0, r2, r2, r1
 264 0176 4FEA9212 		lsr	r2, r2, #6
 265 017a 7968     		ldr	r1, [r7, #4]
 266 017c 01FB02F2 		mul	r2, r1, r2
 267 0180 02F1FF32 		add	r2, r2, #-1
 268 0184 5A60     		str	r2, [r3, #4]
 138:../Source Files/lpc17xx_systick.c **** 	}
 139:../Source Files/lpc17xx_systick.c **** }
 269              		.loc 1 139 0
 270 0186 07F11007 		add	r7, r7, #16
 271 018a BD46     		mov	sp, r7
 272 018c 80BD     		pop	{r7, pc}
 273              		.cfi_endproc
 274              	.LFE58:
 276 018e 00BF     		.align	2
 277              		.global	SYSTICK_ExternalInit
 278              		.thumb
 279              		.thumb_func
 281              	SYSTICK_ExternalInit:
 282              	.LFB59:
 140:../Source Files/lpc17xx_systick.c **** 
 141:../Source Files/lpc17xx_systick.c **** /*********************************************************************//**
 142:../Source Files/lpc17xx_systick.c ****  * @brief 		Initial System Tick with using external clock source
 143:../Source Files/lpc17xx_systick.c ****  * @param[in]	freq	external clock frequency(Hz)
 144:../Source Files/lpc17xx_systick.c ****  * @param[in]	time	time interval(ms)
 145:../Source Files/lpc17xx_systick.c ****  * @return 		None
 146:../Source Files/lpc17xx_systick.c ****  **********************************************************************/
 147:../Source Files/lpc17xx_systick.c **** void SYSTICK_ExternalInit(uint32_t freq, uint32_t time)
 148:../Source Files/lpc17xx_systick.c **** {
 283              		.loc 1 148 0
 284              		.cfi_startproc
 285              		@ args = 0, pretend = 0, frame = 16
 286              		@ frame_needed = 1, uses_anonymous_args = 0
 287 0190 80B5     		push	{r7, lr}
 288              	.LCFI11:
 289              		.cfi_def_cfa_offset 8
 290              		.cfi_offset 7, -8
 291              		.cfi_offset 14, -4
 292 0192 84B0     		sub	sp, sp, #16
 293              	.LCFI12:
 294              		.cfi_def_cfa_offset 24
 295 0194 00AF     		add	r7, sp, #0
 296              	.LCFI13:
 297              		.cfi_def_cfa_register 7
 298 0196 7860     		str	r0, [r7, #4]
 299 0198 3960     		str	r1, [r7, #0]
 149:../Source Files/lpc17xx_systick.c **** 	float maxtime;
 150:../Source Files/lpc17xx_systick.c **** 
 151:../Source Files/lpc17xx_systick.c **** 	/* With external clock frequency for LPC17xx is 'freq'
 152:../Source Files/lpc17xx_systick.c **** 	 * And limit 24 bit for RELOAD value
 153:../Source Files/lpc17xx_systick.c **** 	 * So the maximum time can be set:
 154:../Source Files/lpc17xx_systick.c **** 	 * 1/freq * (2^24) * 1000 (ms)
 155:../Source Files/lpc17xx_systick.c **** 	 */
 156:../Source Files/lpc17xx_systick.c **** 	//check time value is available or not
 157:../Source Files/lpc17xx_systick.c **** 	maxtime = (1<<24)/(freq / 1000) ;
 300              		.loc 1 157 0
 301 019a 7A68     		ldr	r2, [r7, #4]
 302 019c 44F6D353 		movw	r3, #19923
 303 01a0 C1F26203 		movt	r3, 4194
 304 01a4 A3FB0203 		umull	r0, r3, r3, r2
 305 01a8 4FEA9313 		lsr	r3, r3, #6
 306 01ac 4FF08072 		mov	r2, #16777216
 307 01b0 B2FBF3F3 		udiv	r3, r2, r3
 308 01b4 1846     		mov	r0, r3
 309 01b6 FFF7FEFF 		bl	__aeabi_ui2f
 310 01ba 0346     		mov	r3, r0
 311 01bc FB60     		str	r3, [r7, #12]	@ float
 158:../Source Files/lpc17xx_systick.c **** 	if (time>maxtime)
 312              		.loc 1 158 0
 313 01be 3868     		ldr	r0, [r7, #0]
 314 01c0 FFF7FEFF 		bl	__aeabi_ui2f
 315 01c4 0346     		mov	r3, r0
 316 01c6 1846     		mov	r0, r3
 317 01c8 F968     		ldr	r1, [r7, #12]	@ float
 318 01ca FFF7FEFF 		bl	__aeabi_fcmpgt
 319 01ce 0346     		mov	r3, r0
 320 01d0 002B     		cmp	r3, #0
 321 01d2 00D0     		beq	.L19
 322              	.L17:
 323              	.L18:
 159:../Source Files/lpc17xx_systick.c **** 		//Error Loop
 160:../Source Files/lpc17xx_systick.c **** 		while(1);
 324              		.loc 1 160 0 discriminator 1
 325 01d4 FEE7     		b	.L18
 326              	.L19:
 161:../Source Files/lpc17xx_systick.c **** 	else
 162:../Source Files/lpc17xx_systick.c **** 	{
 163:../Source Files/lpc17xx_systick.c **** 		//Select external clock is System Tick clock source
 164:../Source Files/lpc17xx_systick.c **** 		SysTick->CTRL &= ~ ST_CTRL_CLKSOURCE;
 327              		.loc 1 164 0
 328 01d6 4EF21003 		movw	r3, #57360
 329 01da CEF20003 		movt	r3, 57344
 330 01de 4EF21002 		movw	r2, #57360
 331 01e2 CEF20002 		movt	r2, 57344
 332 01e6 1268     		ldr	r2, [r2, #0]
 333 01e8 22F00402 		bic	r2, r2, #4
 334 01ec 1A60     		str	r2, [r3, #0]
 165:../Source Files/lpc17xx_systick.c **** 		/* Set RELOAD value
 166:../Source Files/lpc17xx_systick.c **** 		 * RELOAD = (freq/1000) * time - 1
 167:../Source Files/lpc17xx_systick.c **** 		 * with time base is millisecond
 168:../Source Files/lpc17xx_systick.c **** 		 */
 169:../Source Files/lpc17xx_systick.c **** 		maxtime = (freq/1000)*time - 1;
 335              		.loc 1 169 0
 336 01ee 7A68     		ldr	r2, [r7, #4]
 337 01f0 44F6D353 		movw	r3, #19923
 338 01f4 C1F26203 		movt	r3, 4194
 339 01f8 A3FB0213 		umull	r1, r3, r3, r2
 340 01fc 4FEA9313 		lsr	r3, r3, #6
 341 0200 3A68     		ldr	r2, [r7, #0]
 342 0202 02FB03F3 		mul	r3, r2, r3
 343 0206 03F1FF33 		add	r3, r3, #-1
 344 020a 1846     		mov	r0, r3
 345 020c FFF7FEFF 		bl	__aeabi_ui2f
 346 0210 0346     		mov	r3, r0
 347 0212 FB60     		str	r3, [r7, #12]	@ float
 170:../Source Files/lpc17xx_systick.c **** 		SysTick->LOAD = (freq/1000)*time - 1;
 348              		.loc 1 170 0
 349 0214 4EF21003 		movw	r3, #57360
 350 0218 CEF20003 		movt	r3, 57344
 351 021c 7968     		ldr	r1, [r7, #4]
 352 021e 44F6D352 		movw	r2, #19923
 353 0222 C1F26202 		movt	r2, 4194
 354 0226 A2FB0102 		umull	r0, r2, r2, r1
 355 022a 4FEA9212 		lsr	r2, r2, #6
 356 022e 3968     		ldr	r1, [r7, #0]
 357 0230 01FB02F2 		mul	r2, r1, r2
 358 0234 02F1FF32 		add	r2, r2, #-1
 359 0238 5A60     		str	r2, [r3, #4]
 171:../Source Files/lpc17xx_systick.c **** 	}
 172:../Source Files/lpc17xx_systick.c **** }
 360              		.loc 1 172 0
 361 023a 07F11007 		add	r7, r7, #16
 362 023e BD46     		mov	sp, r7
 363 0240 80BD     		pop	{r7, pc}
 364              		.cfi_endproc
 365              	.LFE59:
 367 0242 00BF     		.align	2
 368              		.global	SYSTICK_Cmd
 369              		.thumb
 370              		.thumb_func
 372              	SYSTICK_Cmd:
 373              	.LFB60:
 173:../Source Files/lpc17xx_systick.c **** 
 174:../Source Files/lpc17xx_systick.c **** /*********************************************************************//**
 175:../Source Files/lpc17xx_systick.c ****  * @brief 		Enable/disable System Tick counter
 176:../Source Files/lpc17xx_systick.c ****  * @param[in]	NewState	System Tick counter status, should be:
 177:../Source Files/lpc17xx_systick.c ****  * 					- ENABLE
 178:../Source Files/lpc17xx_systick.c ****  * 					- DISABLE
 179:../Source Files/lpc17xx_systick.c ****  * @return 		None
 180:../Source Files/lpc17xx_systick.c ****  **********************************************************************/
 181:../Source Files/lpc17xx_systick.c **** void SYSTICK_Cmd(FunctionalState NewState)
 182:../Source Files/lpc17xx_systick.c **** {
 374              		.loc 1 182 0
 375              		.cfi_startproc
 376              		@ args = 0, pretend = 0, frame = 8
 377              		@ frame_needed = 1, uses_anonymous_args = 0
 378              		@ link register save eliminated.
 379 0244 80B4     		push	{r7}
 380              	.LCFI14:
 381              		.cfi_def_cfa_offset 4
 382              		.cfi_offset 7, -4
 383 0246 83B0     		sub	sp, sp, #12
 384              	.LCFI15:
 385              		.cfi_def_cfa_offset 16
 386 0248 00AF     		add	r7, sp, #0
 387              	.LCFI16:
 388              		.cfi_def_cfa_register 7
 389 024a 0346     		mov	r3, r0
 390 024c FB71     		strb	r3, [r7, #7]
 183:../Source Files/lpc17xx_systick.c **** 	CHECK_PARAM(PARAM_FUNCTIONALSTATE(NewState));
 184:../Source Files/lpc17xx_systick.c **** 
 185:../Source Files/lpc17xx_systick.c **** 	if(NewState == ENABLE)
 391              		.loc 1 185 0
 392 024e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 393 0250 012B     		cmp	r3, #1
 394 0252 0CD1     		bne	.L21
 186:../Source Files/lpc17xx_systick.c **** 		//Enable System Tick counter
 187:../Source Files/lpc17xx_systick.c **** 		SysTick->CTRL |= ST_CTRL_ENABLE;
 395              		.loc 1 187 0
 396 0254 4EF21003 		movw	r3, #57360
 397 0258 CEF20003 		movt	r3, 57344
 398 025c 4EF21002 		movw	r2, #57360
 399 0260 CEF20002 		movt	r2, 57344
 400 0264 1268     		ldr	r2, [r2, #0]
 401 0266 42F00102 		orr	r2, r2, #1
 402 026a 1A60     		str	r2, [r3, #0]
 403 026c 0BE0     		b	.L20
 404              	.L21:
 188:../Source Files/lpc17xx_systick.c **** 	else
 189:../Source Files/lpc17xx_systick.c **** 		//Disable System Tick counter
 190:../Source Files/lpc17xx_systick.c **** 		SysTick->CTRL &= ~ST_CTRL_ENABLE;
 405              		.loc 1 190 0
 406 026e 4EF21003 		movw	r3, #57360
 407 0272 CEF20003 		movt	r3, 57344
 408 0276 4EF21002 		movw	r2, #57360
 409 027a CEF20002 		movt	r2, 57344
 410 027e 1268     		ldr	r2, [r2, #0]
 411 0280 22F00102 		bic	r2, r2, #1
 412 0284 1A60     		str	r2, [r3, #0]
 413              	.L20:
 191:../Source Files/lpc17xx_systick.c **** }
 414              		.loc 1 191 0
 415 0286 07F10C07 		add	r7, r7, #12
 416 028a BD46     		mov	sp, r7
 417 028c 80BC     		pop	{r7}
 418 028e 7047     		bx	lr
 419              		.cfi_endproc
 420              	.LFE60:
 422              		.align	2
 423              		.global	SYSTICK_IntCmd
 424              		.thumb
 425              		.thumb_func
 427              	SYSTICK_IntCmd:
 428              	.LFB61:
 192:../Source Files/lpc17xx_systick.c **** 
 193:../Source Files/lpc17xx_systick.c **** /*********************************************************************//**
 194:../Source Files/lpc17xx_systick.c ****  * @brief 		Enable/disable System Tick interrupt
 195:../Source Files/lpc17xx_systick.c ****  * @param[in]	NewState	System Tick interrupt status, should be:
 196:../Source Files/lpc17xx_systick.c ****  * 					- ENABLE
 197:../Source Files/lpc17xx_systick.c ****  * 					- DISABLE
 198:../Source Files/lpc17xx_systick.c ****  * @return 		None
 199:../Source Files/lpc17xx_systick.c ****  **********************************************************************/
 200:../Source Files/lpc17xx_systick.c **** void SYSTICK_IntCmd(FunctionalState NewState)
 201:../Source Files/lpc17xx_systick.c **** {
 429              		.loc 1 201 0
 430              		.cfi_startproc
 431              		@ args = 0, pretend = 0, frame = 8
 432              		@ frame_needed = 1, uses_anonymous_args = 0
 433              		@ link register save eliminated.
 434 0290 80B4     		push	{r7}
 435              	.LCFI17:
 436              		.cfi_def_cfa_offset 4
 437              		.cfi_offset 7, -4
 438 0292 83B0     		sub	sp, sp, #12
 439              	.LCFI18:
 440              		.cfi_def_cfa_offset 16
 441 0294 00AF     		add	r7, sp, #0
 442              	.LCFI19:
 443              		.cfi_def_cfa_register 7
 444 0296 0346     		mov	r3, r0
 445 0298 FB71     		strb	r3, [r7, #7]
 202:../Source Files/lpc17xx_systick.c **** 	CHECK_PARAM(PARAM_FUNCTIONALSTATE(NewState));
 203:../Source Files/lpc17xx_systick.c **** 
 204:../Source Files/lpc17xx_systick.c **** 	if(NewState == ENABLE)
 446              		.loc 1 204 0
 447 029a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 448 029c 012B     		cmp	r3, #1
 449 029e 0CD1     		bne	.L24
 205:../Source Files/lpc17xx_systick.c **** 		//Enable System Tick counter
 206:../Source Files/lpc17xx_systick.c **** 		SysTick->CTRL |= ST_CTRL_TICKINT;
 450              		.loc 1 206 0
 451 02a0 4EF21003 		movw	r3, #57360
 452 02a4 CEF20003 		movt	r3, 57344
 453 02a8 4EF21002 		movw	r2, #57360
 454 02ac CEF20002 		movt	r2, 57344
 455 02b0 1268     		ldr	r2, [r2, #0]
 456 02b2 42F00202 		orr	r2, r2, #2
 457 02b6 1A60     		str	r2, [r3, #0]
 458 02b8 0BE0     		b	.L23
 459              	.L24:
 207:../Source Files/lpc17xx_systick.c **** 	else
 208:../Source Files/lpc17xx_systick.c **** 		//Disable System Tick counter
 209:../Source Files/lpc17xx_systick.c **** 		SysTick->CTRL &= ~ST_CTRL_TICKINT;
 460              		.loc 1 209 0
 461 02ba 4EF21003 		movw	r3, #57360
 462 02be CEF20003 		movt	r3, 57344
 463 02c2 4EF21002 		movw	r2, #57360
 464 02c6 CEF20002 		movt	r2, 57344
 465 02ca 1268     		ldr	r2, [r2, #0]
 466 02cc 22F00202 		bic	r2, r2, #2
 467 02d0 1A60     		str	r2, [r3, #0]
 468              	.L23:
 210:../Source Files/lpc17xx_systick.c **** }
 469              		.loc 1 210 0
 470 02d2 07F10C07 		add	r7, r7, #12
 471 02d6 BD46     		mov	sp, r7
 472 02d8 80BC     		pop	{r7}
 473 02da 7047     		bx	lr
 474              		.cfi_endproc
 475              	.LFE61:
 477              		.align	2
 478              		.global	SYSTICK_GetCurrentValue
 479              		.thumb
 480              		.thumb_func
 482              	SYSTICK_GetCurrentValue:
 483              	.LFB62:
 211:../Source Files/lpc17xx_systick.c **** 
 212:../Source Files/lpc17xx_systick.c **** /*********************************************************************//**
 213:../Source Files/lpc17xx_systick.c ****  * @brief 		Get current value of System Tick counter
 214:../Source Files/lpc17xx_systick.c ****  * @param[in]	None
 215:../Source Files/lpc17xx_systick.c ****  * @return 		current value of System Tick counter
 216:../Source Files/lpc17xx_systick.c ****  **********************************************************************/
 217:../Source Files/lpc17xx_systick.c **** uint32_t SYSTICK_GetCurrentValue(void)
 218:../Source Files/lpc17xx_systick.c **** {
 484              		.loc 1 218 0
 485              		.cfi_startproc
 486              		@ args = 0, pretend = 0, frame = 0
 487              		@ frame_needed = 1, uses_anonymous_args = 0
 488              		@ link register save eliminated.
 489 02dc 80B4     		push	{r7}
 490              	.LCFI20:
 491              		.cfi_def_cfa_offset 4
 492              		.cfi_offset 7, -4
 493 02de 00AF     		add	r7, sp, #0
 494              	.LCFI21:
 495              		.cfi_def_cfa_register 7
 219:../Source Files/lpc17xx_systick.c **** 	return (SysTick->VAL);
 496              		.loc 1 219 0
 497 02e0 4EF21003 		movw	r3, #57360
 498 02e4 CEF20003 		movt	r3, 57344
 499 02e8 9B68     		ldr	r3, [r3, #8]
 220:../Source Files/lpc17xx_systick.c **** }
 500              		.loc 1 220 0
 501 02ea 1846     		mov	r0, r3
 502 02ec BD46     		mov	sp, r7
 503 02ee 80BC     		pop	{r7}
 504 02f0 7047     		bx	lr
 505              		.cfi_endproc
 506              	.LFE62:
 508 02f2 00BF     		.align	2
 509              		.global	SYSTICK_ClearCounterFlag
 510              		.thumb
 511              		.thumb_func
 513              	SYSTICK_ClearCounterFlag:
 514              	.LFB63:
 221:../Source Files/lpc17xx_systick.c **** 
 222:../Source Files/lpc17xx_systick.c **** /*********************************************************************//**
 223:../Source Files/lpc17xx_systick.c ****  * @brief 		Clear Counter flag
 224:../Source Files/lpc17xx_systick.c ****  * @param[in]	None
 225:../Source Files/lpc17xx_systick.c ****  * @return 		None
 226:../Source Files/lpc17xx_systick.c ****  **********************************************************************/
 227:../Source Files/lpc17xx_systick.c **** void SYSTICK_ClearCounterFlag(void)
 228:../Source Files/lpc17xx_systick.c **** {
 515              		.loc 1 228 0
 516              		.cfi_startproc
 517              		@ args = 0, pretend = 0, frame = 0
 518              		@ frame_needed = 1, uses_anonymous_args = 0
 519              		@ link register save eliminated.
 520 02f4 80B4     		push	{r7}
 521              	.LCFI22:
 522              		.cfi_def_cfa_offset 4
 523              		.cfi_offset 7, -4
 524 02f6 00AF     		add	r7, sp, #0
 525              	.LCFI23:
 526              		.cfi_def_cfa_register 7
 229:../Source Files/lpc17xx_systick.c **** 	SysTick->CTRL &= ~ST_CTRL_COUNTFLAG;
 527              		.loc 1 229 0
 528 02f8 4EF21003 		movw	r3, #57360
 529 02fc CEF20003 		movt	r3, 57344
 530 0300 4EF21002 		movw	r2, #57360
 531 0304 CEF20002 		movt	r2, 57344
 532 0308 1268     		ldr	r2, [r2, #0]
 533 030a 22F48032 		bic	r2, r2, #65536
 534 030e 1A60     		str	r2, [r3, #0]
 230:../Source Files/lpc17xx_systick.c **** }
 535              		.loc 1 230 0
 536 0310 BD46     		mov	sp, r7
 537 0312 80BC     		pop	{r7}
 538 0314 7047     		bx	lr
 539              		.cfi_endproc
 540              	.LFE63:
 542              	.Letext0:
 543              		.file 2 "c:\\program files\\gnu tools arm embedded\\4.7 2013q2\\bin\\../lib/gcc/arm-none-eabi/4.7.
 544              		.file 3 "C:\\E_Workspace\\LPC1768\\Eg7\\CM3 Core/core_cm3.h"
 545              		.file 4 "C:\\E_Workspace\\LPC1768\\Eg7\\Header Files/lpc_types.h"
 546              		.file 5 "C:\\E_Workspace\\LPC1768\\Eg7\\CM3 Core/system_LPC17xx.h"
 547              		.file 6 "C:\\E_Workspace\\LPC1768\\Eg7\\Header Files/lpc_system_init.h"
DEFINED SYMBOLS
                            *ABS*:00000000 lpc17xx_systick.c
                            *COM*:00000004 delay_timer
                            *COM*:00000004 led_timer
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:20     .text:00000000 $t
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:25     .text:00000000 SysTick_Handler
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:513    .text:000002f4 SYSTICK_ClearCounterFlag
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:117    .text:000000a0 delay_ms
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:162    .text:000000d0 SYSTICK_Config
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:197    .text:000000f0 SYSTICK_InternalInit
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:427    .text:00000290 SYSTICK_IntCmd
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:372    .text:00000244 SYSTICK_Cmd
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:281    .text:00000190 SYSTICK_ExternalInit
C:\Users\Edu_win7\AppData\Local\Temp\ccjP7auh.s:482    .text:000002dc SYSTICK_GetCurrentValue
                     .debug_frame:00000010 $d
                           .group:00000000 wm4.1.4198839cd628579709ab94bfdf5f0d6e
                           .group:00000000 wm4.LPC17xx.h.27.964facdaadd4aa3f18ac78c8a78f0013
                           .group:00000000 wm4.core_cm3.h.32.3cac756d6e704b813781f82afd94fa5f
                           .group:00000000 wm4.newlib.h.8.a9901dc52d1357e3e94003403d43f8b5
                           .group:00000000 wm4.features.h.22.b72b3baab2bb2eab3661375590100b6b
                           .group:00000000 wm4.config.h.193.5fb8ef056cdff92dec3dee9552839d8c
                           .group:00000000 wm4._ansi.h.23.b5bb84d7ba97d82b5b1dc1826a7ae811
                           .group:00000000 wm4.stdint.h.20.54ad762faa59e3c05491630641c8d8bf
                           .group:00000000 wm4.core_cmInstr.h.25.6beb15babd14c076008ec0890c26e21c
                           .group:00000000 wm4.core_cm3.h.83.1a3cb9afc687cf157efeddb3d5f3109e
                           .group:00000000 wm4.LPC17xx.h.953.82b7a9ed60bb594048bc8738cf1d3489
                           .group:00000000 wm4.lpc_types.h.32.a64d7e761ffe573cbca681049cab7b1a
                           .group:00000000 wm4.lpc17xx_pinsel.h.30.767cda9b27a5c688cd97e5947d664047
                           .group:00000000 wm4.lpc17xx_clkpwr.h.30.8537d92ff6965961e80fda89ac5019f2
                           .group:00000000 wm4.lpc17xx_systick.h.30.9f34c15ae315a203fed1d933040ad7b9
                           .group:00000000 wm4.lpc17xx_gpio.h.30.0b884ee110dd20865784f12e1569ecf1
                           .group:00000000 wm4.lpc17xx_wdt.h.34.a2dcafab9849854019efb51f717a8129

UNDEFINED SYMBOLS
GPIO_SetValue
GPIO_ClearValue
led_delay
__aeabi_ui2f
__aeabi_fcmpgt
SystemCoreClock
